-- Database Schema for Employee and Works Relationship
CREATE TABLE Emp (
    emp_id INT PRIMARY KEY,
    ename VARCHAR(50),
    street VARCHAR(100),
    city VARCHAR(50)
);

CREATE TABLE Company (
    c_id INT PRIMARY KEY,
    cname VARCHAR(50),
    city VARCHAR(50)
);

CREATE TABLE Works (
    emp_id INT,
    c_id INT,
    sal DECIMAL(10, 2),
    FOREIGN KEY (emp_id) REFERENCES Emp(emp_id),
    FOREIGN KEY (c_id) REFERENCES Company(c_id)
);

CREATE TABLE Manager (
    mgr_id INT PRIMARY KEY,
    mgrname VARCHAR(50),
    emp_id INT,
    FOREIGN KEY (emp_id) REFERENCES Emp(emp_id)
);

-- Queries for Chit 24
-- 1. Update city of a specific company (e.g., ABC) to Pune
UPDATE Company SET city = 'Pune' WHERE cname = 'ABC';

-- 2. Increase salary by 10% for all managers of 'Mbank'
UPDATE Works 
SET sal = sal * 1.10 
WHERE emp_id IN (SELECT emp_id FROM Manager WHERE mgrname = 'Mbank');

-- 3. Find employees who work in 'Bosch' in Pune
SELECT Emp.ename FROM Emp 
JOIN Works ON Emp.emp_id = Works.emp_id
JOIN Company ON Works.c_id = Company.c_id
WHERE Company.cname = 'Bosch' AND Company.city = 'Pune';

-- 4. Delete records in Works for SBC employees with salary > 50,000
DELETE FROM Works 
WHERE c_id = (SELECT c_id FROM Company WHERE cname = 'SBC') 
AND sal > 50000;
